"use strict";(self.webpackChunksocialnetwork=self.webpackChunksocialnetwork||[]).push([[543],{3461:(e,n,s)=>{s.d(n,{Z:()=>c});var a,t=s(7294);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},r.apply(this,arguments)}const c=function(e){return t.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),a||(a=t.createElement("path",{d:"M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20ZM79.57 196.57a60 60 0 0 1 96.86 0 83.72 83.72 0 0 1-96.86 0ZM100 120a28 28 0 1 1 28 28 28 28 0 0 1-28-28Zm94 59.94a83.48 83.48 0 0 0-29-23.42 52 52 0 1 0-74 0 83.48 83.48 0 0 0-29 23.42 84 84 0 1 1 131.9 0Z"})))}},9543:(e,n,s)=>{s.r(n),s.d(n,{ConversationPage:()=>L,default:()=>q});var a=s(5893),t=s(8370),r=s(8826),c=s(6765),i=s(9250),o=s(7294),l=s(1110),u=s(4184),d=s.n(u),v=s(6925),m=s(9033),f=s(3416),h=s(966),g=s(8335),j=s(1072);var x,p=s(775),N=(0,o.memo)((function(e){var n=e.className,s=e.sendMessage,t=e.roomId,r=(0,j.$G)("pages").t,c=(0,o.useState)(""),i=c[0],l=c[1],u=(0,p.X)(),x=(0,h.C)(g.is),N=function(){var e={messageId:(0,f.x0)(),messageType:"text",textOrPathToFile:i,roomId:t,author:x.userId};s(e),l("")},w=(0,o.useCallback)((function(e){"Enter"===e.key&&N()}),[i]);return(0,o.useEffect)((function(){return document.body.addEventListener("keydown",w),function(){document.body.removeEventListener("keydown",w)}}),[w]),(0,a.jsxs)("div",{className:d()("NGKkPNb2",{},[n]),children:[(0,a.jsx)(v.I,{placeholder:r("Напишите сообщение..."),className:"lmjk5h4e",value:i,onChange:l,onBlur:function(){u&&(document.documentElement.scrollTop=0)}}),(0,a.jsx)(m.Z,{className:"qt3boMLN",onClick:N})]})})),w=s(9655),b=s(9588);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},y.apply(this,arguments)}const O=function(e){return o.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),x||(x=o.createElement("path",{d:"M168.49 199.51a12 12 0 0 1-17 17l-80-80a12 12 0 0 1 0-17l80-80a12 12 0 0 1 17 17L97 128Z"})))};var E=s(5914);var M=(0,o.memo)((function(e){var n=e.className,s=e.roomId,t=(0,o.useState)(null),r=t[0],c=t[1],i=(0,j.$G)("pages").t,l=(0,h.C)(g.is);return(0,o.useEffect)((function(){if(l.conversations){var e=l.conversations.find((function(e){return e.roomId===s}));if(e){var n=e.friendId;(0,E.E)(n).then((function(e){e&&c(e)})).catch(console.log)}}}),[l.conversations]),(0,a.jsxs)("div",{className:d()("HmuVuq_Y",{},[n]),children:[(0,a.jsxs)(w.rU,{to:"/messenger",className:"L1xmzEnL",children:[(0,a.jsx)(O,{className:"Pfxli94o"})," ",i("Назад")]}),null==r?void 0:r.firstName," ",null==r?void 0:r.lastName,(0,a.jsx)(b.q,{avatarPath:null==r?void 0:r.avatarPath,size:"M",isOnline:null==r?void 0:r.isOnline})]})})),k=s(7484),Z=s.n(k),P=s(6649);var I=function(e){var n=e.className,s=e.message,t=e.removeMessage,r=(0,o.useState)(null),c=r[0],i=r[1],l=(0,j.$G)("pages"),u=l.t,v=l.i18n,m=(0,h.C)(g.is);return(0,o.useEffect)((function(){(0,E.E)(s.author).then((function(e){e&&i(e)})).catch(console.log)}),[]),(0,a.jsxs)("div",{className:d()("qTjRnawn",{},[n]),children:[(0,a.jsx)(b.q,{avatarPath:null==c?void 0:c.avatarPath,size:"MS",className:"zWShtmEL"}),(0,a.jsxs)("span",{className:"fG8w2O_y",children:[(0,a.jsxs)("div",{className:"ug534KDM",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"ZGP3n1hj",children:Z()(s.createdAt).locale(v.language).toNow(!0)+u(" назад")})}),(0,a.jsx)("div",{children:(null==m?void 0:m.userId)===s.author&&(0,a.jsx)(P.Z,{className:"daqOTnHV",onClick:function(){return t(s.messageId)}})})]}),(0,a.jsx)("div",{className:"ADXiP3M8",children:s.textOrPathToFile})]})]})};var C=function(e){e.className;var n=(0,o.useRef)(null),s=(0,i.s0)(),t=(0,j.$G)().t,r=(0,h.C)(g.is).conversations,u=(0,i.UO)().roomId;if((0,o.useEffect)((function(){r&&(r.find((function(e){return e.roomId===u}))||s("*",{replace:!0}))}),[r]),!u)return(0,a.jsx)("div",{children:t("Такого диалога не существует")});var d=(0,l.Z)(u),v=d.messages,m=d.sendMessage,f=d.removeMessage;return(0,o.useEffect)((function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[v]),(0,a.jsx)("div",{className:"jGbBBFW5",children:(0,a.jsxs)(c.O,{className:"MyoXwBQK",children:[(0,a.jsx)(M,{roomId:u}),(0,a.jsx)("div",{className:"loM0MVMK",ref:n,children:v.map((function(e){return(0,a.jsx)(I,{message:e,removeMessage:f},e.messageId)}))}),(0,a.jsx)(N,{roomId:u,sendMessage:m})]})})};var L=function(e){e.className;var n=(0,p.X)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h,{}),(0,a.jsx)(r.Z,{className:n?"_awlvnuX":"",children:(0,a.jsx)(C,{})})]})};const q=L},8826:(e,n,s)=>{s.d(n,{Z:()=>i});var a=s(5893),t=s(4184),r=s.n(t);var c=s(775);const i=function(e){var n,s=e.className,t=e.children,i=e.headerStyle,o=(0,c.X)();return console.log(o,"mobile"),(0,a.jsx)("div",{className:r()("FnIs3UxI",(n={},n._qqlRrmD=i,n.kYVyYLOf=o&&!i,n),[s]),children:t})}},8370:(e,n,s)=>{s.d(n,{h:()=>C});var a,t=s(5893),r=s(4184),c=s.n(r),i=s(8826),o=s(3743),l=s(9250),u=s(2519),d=s(2116),v=s(9588),m=s(966),f=s(8335),h=s(7294);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},g.apply(this,arguments)}const j=function(e){return h.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),a||(a=h.createElement("path",{d:"m216.49 104.49-80 80a12 12 0 0 1-17 0l-80-80a12 12 0 0 1 17-17L128 159l71.51-71.52a12 12 0 0 1 17 17Z"})))};var x,p=s(9655),N=s(7312),w=s(1051);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},b.apply(this,arguments)}const y=function(e){return h.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),x||(x=h.createElement("path",{d:"M116 216a12 12 0 0 1-12 12H48a20 20 0 0 1-20-20V48a20 20 0 0 1 20-20h56a12 12 0 0 1 0 24H52v152h52a12 12 0 0 1 12 12Zm108.49-96.49-40-40a12 12 0 0 0-17 17L187 116h-83a12 12 0 0 0 0 24h83l-19.52 19.51a12 12 0 0 0 17 17l40-40a12 12 0 0 0 .01-17Z"})))};var O=s(3461),E=s(4514),M=s(1072);const k="lLj83MT8",Z="bDPtG7VD";var P=function(e){var n,s=e.className,a=(0,h.useState)(!1),r=a[0],i=a[1],u=(0,m.C)(f.is),d=(0,o.T)(),g=(0,l.s0)(),x=(0,M.$G)("pages").t;return(0,h.useEffect)((function(){var e=function(e){e.target.closest("#profileBtn")||i(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),(0,t.jsxs)("div",{className:c()("zXdybQLe",{},[s]),onClick:function(e){e.target.closest("#container")||i((function(e){return!e}))},id:"profileBtn",children:[(0,t.jsxs)("div",{className:"g_HDaOnQ",children:[(0,t.jsx)(v.q,{size:"S",avatarPath:u.avatarPath,className:"zYGuNlkk"}),(0,t.jsx)(j,{className:"AhJwW0xn"})]}),(0,t.jsxs)("div",{className:c()("vH4jcesl",(n={},n.zOUMz4rj=r,n),[]),id:"container",children:[(0,t.jsxs)(p.rU,{className:k,to:"/changeProfile",children:[(0,t.jsx)(O.Z,{className:Z}),x("Редактировать профиль")]}),(0,t.jsxs)("span",{className:k,onClick:function(){d((0,N.w7)({navigate:g}))},children:[(0,t.jsx)(y,{className:Z}),x("Выйти")]}),(0,t.jsxs)("div",{className:"KZfVicZM",children:[(0,t.jsx)(E.k,{short:!0}),(0,t.jsx)(w.Z,{})]})]})]})};var I=s(775),C=function(e){e.className,(0,o.T)(),(0,l.s0)();var n,s=(0,I.X)();return(0,t.jsxs)("div",{className:"KVbUQodg",children:[(0,t.jsx)("div",{className:c()("shonqUwZ",(n={},n.Rqh6NHRV=s,n),[]),children:(0,t.jsxs)(i.Z,{className:"ap0ogjxd",headerStyle:!0,children:[(0,t.jsx)(u.Dt,{}),(0,t.jsx)(P,{})]})}),(0,t.jsx)(d.P_,{})]})}},775:(e,n,s)=>{s.d(n,{X:()=>a});var a=function(){return document.documentElement.clientWidth<=900}},3416:(e,n,s)=>{s.d(n,{x0:()=>a});let a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,n)=>e+((n&=63)<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n>62?"-":"_")),"")}}]);