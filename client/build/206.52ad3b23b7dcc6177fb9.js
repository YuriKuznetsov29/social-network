"use strict";(self.webpackChunksocialnetwork=self.webpackChunksocialnetwork||[]).push([[206],{3461:(e,t,n)=>{n.d(t,{Z:()=>c});var s,a=n(7294);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r.apply(this,arguments)}const c=function(e){return a.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),s||(s=a.createElement("path",{d:"M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20ZM79.57 196.57a60 60 0 0 1 96.86 0 83.72 83.72 0 0 1-96.86 0ZM100 120a28 28 0 1 1 28 28 28 28 0 0 1-28-28Zm94 59.94a83.48 83.48 0 0 0-29-23.42 52 52 0 1 0-74 0 83.48 83.48 0 0 0-29 23.42 84 84 0 1 1 131.9 0Z"})))}},9237:(e,t,n)=>{n.d(t,{S:()=>C});var s=n(5893),a=n(4184),r=n.n(a),c=n(6765),i=n(4661),l=n(6925),o=n(9033),u=n(7294);var d,h=n(8770),v=n(7484),f=n.n(v),m=function(e){var t=e.className,n=e.comment,a=(0,u.useState)(null),c=a[0],l=a[1];return(0,u.useEffect)((function(){var e,t,s,a;e=void 0,t=void 0,a=function(){var e,t;return function(e,t){var n,s,a,r,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,i[0]&&(c=0)),c;)try{if(n=1,s&&(a=2&i[0]?s.return:i[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,s=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((a=(a=c.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],s=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,i.ZP.get("".concat(i.T5,"/user/").concat(n.author))];case 1:return e=s.sent(),l(e.data.user),[3,3];case 2:return t=s.sent(),console.log(t),[3,3];case 3:return[2]}}))},new((s=void 0)||(s=Promise))((function(n,r){function c(e){try{l(a.next(e))}catch(e){r(e)}}function i(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(c,i)}l((a=a.apply(e,t||[])).next())}))}),[]),(0,s.jsxs)("div",{className:r()("w0BieU5V",{},[t]),children:[(0,s.jsx)(h.q,{avatarPath:null==c?void 0:c.avatarPath,size:"MS",className:"vEGBWiRo"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"u9ynVpfL",children:[(0,s.jsx)("div",{children:null==c?void 0:c.firstName}),(0,s.jsx)("div",{className:"XJf2awnt",children:f()(n.createdAt).locale("ru").toNow(!0)+" назад"})]}),(0,s.jsx)("div",{className:"WX6KFxh0",children:n.body})]})]})};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}const x=function(e){return u.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,overflow:"visible",viewBox:"0 0 24 24"},e),d||(d=u.createElement("path",{d:"M12 4.419C9.174-1.276.001.355.001 7.689.001 14.959 9.904 18.627 12 23c2.096-4.373 12-8.041 12-15.311 0-7.327-9.17-8.972-12-3.27z"})))};var j;function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},g.apply(this,arguments)}const w=function(e){return u.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),j||(j=u.createElement("path",{d:"M216 44H40a20 20 0 0 0-20 20v160a19.82 19.82 0 0 0 11.56 18.1 20.14 20.14 0 0 0 8.49 1.9 19.91 19.91 0 0 0 12.82-4.72l.19-.16L84 212h132a20 20 0 0 0 20-20V64a20 20 0 0 0-20-20Zm-4 144H82.5a20 20 0 0 0-12.87 4.69l-.19.16L44 215.14V68h168Z"})))};var N=n(966),b=n(8335);const y={authorContainer:"iVV3WopF",contentContainer:"HTnAV85P",commentsContainer:"_ispfUmJ",image:"KbnuUjZN",btnContainer:"eufHnpkN",commentCollapsed:"vEqRs7wC",plane:"TNYl9p8C",inputBlock:"QC9v5TEa",commentBlock:"ITTKkIek",commentBtn:"Z6PIcKht",show:"ZkpiiiJE",inputMessage:"Xk8xNm6T",likesValue:"c3pPsG55",heart:"Iwp4cngX",liked:"bvS6sqkL",time:"XI6GTzGB",avatar:"WatDKpWy",text:"nfiibY3j"};var k=n(1072),Z=function(e,t,n,s){return new(n||(n=Promise))((function(a,r){function c(e){try{l(s.next(e))}catch(e){r(e)}}function i(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}l((s=s.apply(e,t||[])).next())}))},O=function(e,t){var n,s,a,r,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,i[0]&&(c=0)),c;)try{if(n=1,s&&(a=2&i[0]?s.return:i[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,s=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((a=(a=c.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],s=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},C=function(e){e.className;var t,n,a,d,v=e.post,p=(0,u.useState)(""),j=p[0],g=p[1],C=(0,u.useState)(!1),P=C[0],E=C[1],T=(0,u.useState)(null),S=T[0],B=T[1],L=(0,u.useState)(v.likes),M=L[0],H=L[1],V=(0,u.useState)(!1),F=V[0],I=V[1],_=(0,u.useState)(null),G=_[0],K=_[1],q=(0,u.useRef)(null),X=(0,N.C)(b.is),z=(0,k.$G)("pages"),W=z.t,U=z.i18n;return(0,u.useEffect)((function(){Z(void 0,void 0,void 0,(function(){var e,t;return O(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.ZP.get("".concat(i.T5,"/user/").concat(v.author))];case 1:return e=n.sent(),K(e.data.user),[3,3];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return[2]}}))}))}),[]),(0,u.useEffect)((function(){Z(void 0,void 0,void 0,(function(){var e,t;return O(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.ZP.post("".concat(i.T5,"/post/getCommentsForPost"),{postId:v._id})];case 1:return e=n.sent(),B(e.data.comments),[3,3];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return[2]}}))})),Z(void 0,void 0,void 0,(function(){var e,t;return O(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.ZP.post("".concat(i.T5,"/post/isLiked"),{author:X.userId,postId:v._id})];case 1:return e=n.sent(),I(e.data.liked),[3,3];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return[2]}}))}))}),[]),(0,u.useEffect)((function(){q.current&&(q.current.scrollTop=q.current.scrollHeight)}),[S]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(c.O,{className:y.container,children:[(0,s.jsxs)("div",{className:y.authorContainer,children:[(0,s.jsx)(h.q,{avatarPath:null==G?void 0:G.avatarPath,className:y.avatar,size:"M"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[null==G?void 0:G.firstName," ",null==G?void 0:G.lastName]}),(0,s.jsx)("div",{className:y.time,children:f()(v.date).locale(U.language).toNow(!0)+W(" назад")})]})]}),(0,s.jsxs)("div",{className:y.contentContainer,children:[(0,s.jsx)("div",{className:y.text,dangerouslySetInnerHTML:(d=v.text||"",{__html:d.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />")})}),v.imagePath&&(0,s.jsx)("img",{className:y.image,src:i.LB+v.imagePath,alt:"image"})]}),(0,s.jsxs)("div",{className:r()(y.btnContainer,(t={},t[y.commentCollapsed]=P,t),[]),children:[(0,s.jsx)("div",{className:y.likesValue,children:v.comments.length}),(0,s.jsx)(w,{className:y.commentBtn,onClick:function(){E((function(e){return!e}))}}),(0,s.jsx)("div",{className:y.likesValue,children:M}),(0,s.jsx)(x,{className:r()(y.heart,(n={},n[y.liked]=F,n)),onClick:function(){return Z(void 0,void 0,void 0,(function(){var e;return O(this,(function(t){switch(t.label){case 0:return[4,i.ZP.post("".concat(i.T5,"/post/toggleLike"),{author:X.userId,postId:v._id})];case 1:return e=t.sent(),H(e.data.likes),I((function(e){return!e})),[2]}}))}))}})]}),(0,s.jsxs)("div",{className:r()(y.commentBlock,(a={},a[y.show]=P,a),[]),children:[(0,s.jsx)("div",{className:y.commentsContainer,ref:q,children:null==S?void 0:S.map((function(e){return(0,s.jsx)(m,{comment:e},e._id)}))}),(0,s.jsxs)("div",{className:y.inputBlock,children:[(0,s.jsx)(l.I,{placeholder:"Напиcать комментарий...",className:y.inputMessage,value:j,onChange:g}),(0,s.jsx)(o.Z,{className:y.plane,onClick:function(){return Z(void 0,void 0,void 0,(function(){var e,t;return O(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.ZP.post("".concat(i.T5,"/post/createComment"),{author:X.userId,body:j,postId:v._id})];case 1:return e=n.sent(),B(e.data.comments),[3,3];case 2:return t=n.sent(),console.log(t),[3,3];case 3:return g(""),[2]}}))}))}})]})]})]})})}},8826:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(5893),a=n(4184),r=n.n(a);var c=n(775);const i=function(e){var t,n=e.className,a=e.children,i=e.headerStyle,l=(0,c.X)();return(0,s.jsx)("div",{className:r()("FnIs3UxI",(t={},t._qqlRrmD=i,t.kYVyYLOf=l&&!i,t),[n]),children:a})}},8370:(e,t,n)=>{n.d(t,{h:()=>S});var s,a=n(5893),r=n(4184),c=n.n(r),i=n(8826),l=n(3743),o=n(9250),u=n(2519),d=n(3366),h=n(8770),v=n(966),f=n(8335),m=n(7294);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},p.apply(this,arguments)}const x=function(e){return m.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),s||(s=m.createElement("path",{d:"m216.49 104.49-80 80a12 12 0 0 1-17 0l-80-80a12 12 0 0 1 17-17L128 159l71.51-71.52a12 12 0 0 1 17 17Z"})))};var j,g=n(9655),w=n(5667),N=n(1051);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},b.apply(this,arguments)}const y=function(e){return m.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),j||(j=m.createElement("path",{d:"M116 216a12 12 0 0 1-12 12H48a20 20 0 0 1-20-20V48a20 20 0 0 1 20-20h56a12 12 0 0 1 0 24H52v152h52a12 12 0 0 1 12 12Zm108.49-96.49-40-40a12 12 0 0 0-17 17L187 116h-83a12 12 0 0 0 0 24h83l-19.52 19.51a12 12 0 0 0 17 17l40-40a12 12 0 0 0 .01-17Z"})))};var k=n(3461);const Z="lLj83MT8",O="bDPtG7VD";var C=n(4514),P=n(1072),E=function(e){var t,n=e.className,s=(0,m.useState)(!1),r=s[0],i=s[1],u=(0,v.C)(f.is),d=(0,l.T)(),p=(0,o.s0)(),j=(0,P.$G)("pages").t;return(0,m.useEffect)((function(){var e=function(e){e.target.closest("#profileBtn")||i(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),(0,a.jsxs)("div",{className:c()("zXdybQLe",{},[n]),onClick:function(e){e.target.closest("#container")||i((function(e){return!e}))},id:"profileBtn",children:[(0,a.jsxs)("div",{className:"g_HDaOnQ",children:[(0,a.jsx)(h.q,{size:"S",avatarPath:u.avatarPath,className:"zYGuNlkk"}),(0,a.jsx)(x,{className:"AhJwW0xn"})]}),(0,a.jsxs)("div",{className:c()("vH4jcesl",(t={},t.zOUMz4rj=r,t),[]),id:"container",children:[(0,a.jsxs)(g.rU,{className:Z,to:"/changeProfile",children:[(0,a.jsx)(k.Z,{className:O}),j("Редактировать профиль")]}),(0,a.jsxs)("span",{className:Z,onClick:function(){d((0,w.w7)()),p("/")},children:[(0,a.jsx)(y,{className:O}),j("Выйти")]}),(0,a.jsxs)("div",{className:"KZfVicZM",children:[(0,a.jsx)(C.k,{short:!0}),(0,a.jsx)(N.Z,{})]})]})]})};var T=n(775),S=function(e){e.className,(0,l.T)(),(0,o.s0)();var t,n=(0,T.X)();return(0,a.jsxs)("div",{className:"KVbUQodg",children:[(0,a.jsx)("div",{className:c()("shonqUwZ",(t={},t.Rqh6NHRV=n,t),[]),children:(0,a.jsxs)(i.Z,{className:"ap0ogjxd",headerStyle:!0,children:[(0,a.jsx)(u.Dt,{}),(0,a.jsx)(E,{})]})}),(0,a.jsx)(d.P_,{})]})}},3060:(e,t,n)=>{n.d(t,{K:()=>O});var s,a=n(5893),r=n(4184),c=n.n(r),i=n(3048),l=n(3461),o=n(7294);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u.apply(this,arguments)}const d=function(e){return o.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),s||(s=o.createElement("path",{d:"M216 36H40a20 20 0 0 0-20 20v144a20 20 0 0 0 20 20h176a20 20 0 0 0 20-20V56a20 20 0 0 0-20-20Zm-4 160H44V60h168ZM68 92a12 12 0 0 1 12-12h96a12 12 0 0 1 0 24H80a12 12 0 0 1-12-12Zm0 36a12 12 0 0 1 12-12h96a12 12 0 0 1 0 24H80a12 12 0 0 1-12-12Zm0 36a12 12 0 0 1 12-12h96a12 12 0 0 1 0 24H80a12 12 0 0 1-12-12Z"})))};var h;function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},v.apply(this,arguments)}const f=function(e){return o.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),h||(h=o.createElement("path",{d:"M128 20a108 108 0 0 0-96.15 157.23L21 209.66A20 20 0 0 0 46.34 235l32.43-10.81A108 108 0 1 0 128 20Zm0 192a84 84 0 0 1-42.06-11.27 12 12 0 0 0-6-1.62 12.1 12.1 0 0 0-3.8.62l-29.79 9.93 9.93-29.79a12 12 0 0 0-1-9.81A84 84 0 1 1 128 212Z"})))};var m=n(7974);const p="r6gTLj8k";var x=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:p}),(0,a.jsx)("div",{className:p}),(0,a.jsx)("div",{className:p}),(0,a.jsx)("div",{className:p})]})},j=n(966),g=n(8335),w=n(1072);const N="kMmc9nue",b="qL8zRbrL",y="lg3MWbpi",k="wXJOgWkD";var Z=n(775),O=function(e){var t=e.className,n=(0,j.C)(g.MS),s=(0,w.$G)("pages").t;return(0,Z.X)()?(0,a.jsxs)("div",{className:"gt4tTp2l",children:[(0,a.jsx)(i.F,{to:"/news",className:y,active:!0,activeClass:k,children:(0,a.jsx)(d,{className:b})}),(0,a.jsx)(i.F,{to:"/friends",className:y,active:!0,activeClass:k,children:(0,a.jsx)(m.Z,{className:b})}),(0,a.jsx)(i.F,{to:"/messenger",className:y,active:!0,activeClass:k,children:(0,a.jsx)(f,{className:b})}),(0,a.jsx)(i.F,{to:"/profile",className:y,active:!0,activeClass:k,children:(0,a.jsx)(l.Z,{className:b})})]}):(0,a.jsx)("div",{className:c()("_C1Y19F4",{},[t]),children:(0,a.jsx)("nav",{className:"cTBJmDKy",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.F,{to:"/profile",className:N,children:[(0,a.jsx)(l.Z,{className:b}),s("Моя страница")]}),(0,a.jsxs)(i.F,{to:"/news",className:N,children:[(0,a.jsx)(d,{className:b}),s("Новости")]}),(0,a.jsxs)(i.F,{to:"/messenger",className:N,children:[(0,a.jsx)(f,{className:b}),s("Мессенджер")]}),(0,a.jsxs)(i.F,{to:"/friends",className:N,children:[(0,a.jsx)(m.Z,{className:b}),s("Друзья")]})]}):(0,a.jsx)(x,{})})})}},775:(e,t,n)=>{n.d(t,{X:()=>s});var s=function(){return document.documentElement.clientWidth<=900}},9731:(e,t,n)=>{n.d(t,{t:()=>c});var s=n(5893);const a="rp_bKThq";var r=n(6765),c=function(){return(0,s.jsxs)(r.O,{className:"c6PEdIRu",children:[(0,s.jsxs)("div",{className:"byhSLFzt",children:[(0,s.jsx)("div",{className:"Uj2NtkeS"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"tvcpv_3e"}),(0,s.jsx)("div",{className:"GqYBSGoK"})]})]}),(0,s.jsx)("div",{className:"dnWj5ENy"}),(0,s.jsx)("div",{className:"dHR5Kdmi"}),(0,s.jsx)("div",{className:"_PQmZ_HJ"}),(0,s.jsx)("div",{className:"KUGT5wSX"}),(0,s.jsxs)("div",{className:"bEnhb5WT",children:[(0,s.jsx)("div",{className:a}),(0,s.jsx)("div",{className:a})]})]})}}}]);