"use strict";(self.webpackChunksocialnetwork=self.webpackChunksocialnetwork||[]).push([[543],{3461:(e,s,n)=>{n.d(s,{Z:()=>c});var a,t=n(7294);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r.apply(this,arguments)}const c=function(e){return t.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),a||(a=t.createElement("path",{d:"M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20ZM79.57 196.57a60 60 0 0 1 96.86 0 83.72 83.72 0 0 1-96.86 0ZM100 120a28 28 0 1 1 28 28 28 28 0 0 1-28-28Zm94 59.94a83.48 83.48 0 0 0-29-23.42 52 52 0 1 0-74 0 83.48 83.48 0 0 0-29 23.42 84 84 0 1 1 131.9 0Z"})))}},9543:(e,s,n)=>{n.r(s),n.d(s,{ConversationPage:()=>L,default:()=>q});var a=n(5893),t=n(8370),r=n(8826),c=n(6765),i=n(9250),l=n(7294),o=n(1110),d=n(4184),u=n.n(d),v=n(6925),h=n(9033),m=n(3416),f=n(966),g=n(8335),j=n(1072);var x,p=(0,l.memo)((function(e){var s=e.className,n=e.sendMessage,t=e.roomId,r=(0,j.$G)("pages").t,c=(0,l.useState)(""),i=c[0],o=c[1],d=(0,f.C)(g.is),x=function(){var e={messageId:(0,m.x0)(),messageType:"text",textOrPathToFile:i,roomId:t,author:d.userId};n(e),o("")},p=(0,l.useCallback)((function(e){"Enter"===e.key&&x()}),[i]);return(0,l.useEffect)((function(){return document.body.addEventListener("keydown",p),function(){document.body.removeEventListener("keydown",p)}}),[p]),(0,a.jsxs)("div",{className:u()("NGKkPNb2",{},[s]),children:[(0,a.jsx)(v.I,{placeholder:r("Напишите сообщение..."),className:"lmjk5h4e",value:i,onChange:o}),(0,a.jsx)(h.Z,{className:"qt3boMLN",onClick:x})]})})),N=n(9655),w=n(9588);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b.apply(this,arguments)}const y=function(e){return l.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),x||(x=l.createElement("path",{d:"M168.49 199.51a12 12 0 0 1-17 17l-80-80a12 12 0 0 1 0-17l80-80a12 12 0 0 1 17 17L97 128Z"})))};var O=n(5914);var E=(0,l.memo)((function(e){var s=e.className,n=e.roomId,t=(0,l.useState)(null),r=t[0],c=t[1],i=(0,j.$G)("pages").t,o=(0,f.C)(g.is);return(0,l.useEffect)((function(){if(o.conversations){var e=o.conversations.find((function(e){return e.roomId===n}));if(e){var s=e.friendId;(0,O.E)(s).then((function(e){e&&c(e)})).catch(console.log)}}}),[o.conversations]),(0,a.jsxs)("div",{className:u()("HmuVuq_Y",{},[s]),children:[(0,a.jsxs)(N.rU,{to:"/messenger",className:"L1xmzEnL",children:[(0,a.jsx)(y,{className:"Pfxli94o"})," ",i("Назад")]}),null==r?void 0:r.firstName," ",null==r?void 0:r.lastName,(0,a.jsx)(w.q,{avatarPath:null==r?void 0:r.avatarPath,size:"M",isOnline:null==r?void 0:r.isOnline})]})})),M=n(7484),k=n.n(M),Z=n(6649);var P=function(e){var s=e.className,n=e.message,t=e.removeMessage,r=(0,l.useState)(null),c=r[0],i=r[1],o=(0,j.$G)("pages"),d=o.t,v=o.i18n,h=(0,f.C)(g.is);return(0,l.useEffect)((function(){(0,O.E)(n.author).then((function(e){e&&i(e)})).catch(console.log)}),[]),(0,a.jsxs)("div",{className:u()("qTjRnawn",{},[s]),children:[(0,a.jsx)(w.q,{avatarPath:null==c?void 0:c.avatarPath,size:"MS",className:"zWShtmEL"}),(0,a.jsxs)("span",{className:"fG8w2O_y",children:[(0,a.jsxs)("div",{className:"ug534KDM",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"ZGP3n1hj",children:k()(n.createdAt).locale(v.language).toNow(!0)+d(" назад")})}),(0,a.jsx)("div",{children:(null==h?void 0:h.userId)===n.author&&(0,a.jsx)(Z.Z,{className:"daqOTnHV",onClick:function(){return t(n.messageId)}})})]}),(0,a.jsx)("div",{className:"ADXiP3M8",children:n.textOrPathToFile})]})]})};var I=function(e){e.className;var s=(0,l.useRef)(null),n=(0,i.s0)(),t=(0,j.$G)().t,r=(0,f.C)(g.is).conversations,d=(0,i.UO)().roomId;if((0,l.useEffect)((function(){r&&(r.find((function(e){return e.roomId===d}))||n("*",{replace:!0}))}),[r]),!d)return(0,a.jsx)("div",{children:t("Такого диалога не существует")});var u=(0,o.Z)(d),v=u.messages,h=u.sendMessage,m=u.removeMessage;return(0,l.useEffect)((function(){s.current&&(s.current.scrollTop=s.current.scrollHeight)}),[v]),(0,a.jsx)("div",{className:"jGbBBFW5",children:(0,a.jsxs)(c.O,{className:"MyoXwBQK",children:[(0,a.jsx)(E,{roomId:d}),(0,a.jsx)("div",{className:"loM0MVMK",ref:s,children:v.map((function(e){return(0,a.jsx)(P,{message:e,removeMessage:m},e.messageId)}))}),(0,a.jsx)(p,{roomId:d,sendMessage:h})]})})},C=n(775);var L=function(e){e.className;var s=(0,C.X)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h,{}),(0,a.jsx)(r.Z,{className:s?"_awlvnuX":"",children:(0,a.jsx)(I,{})})]})};const q=L},8826:(e,s,n)=>{n.d(s,{Z:()=>i});var a=n(5893),t=n(4184),r=n.n(t);var c=n(775);const i=function(e){var s,n=e.className,t=e.children,i=e.headerStyle,l=(0,c.X)();return console.log(l,"mobile"),(0,a.jsx)("div",{className:r()("FnIs3UxI",(s={},s._qqlRrmD=i,s.kYVyYLOf=l&&!i,s),[n]),children:t})}},8370:(e,s,n)=>{n.d(s,{h:()=>C});var a,t=n(5893),r=n(4184),c=n.n(r),i=n(8826),l=n(3743),o=n(9250),d=n(2519),u=n(2116),v=n(9588),h=n(966),m=n(8335),f=n(7294);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g.apply(this,arguments)}const j=function(e){return f.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),a||(a=f.createElement("path",{d:"m216.49 104.49-80 80a12 12 0 0 1-17 0l-80-80a12 12 0 0 1 17-17L128 159l71.51-71.52a12 12 0 0 1 17 17Z"})))};var x,p=n(9655),N=n(7312),w=n(1051);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b.apply(this,arguments)}const y=function(e){return f.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"#fff",viewBox:"0 0 256 256"},e),x||(x=f.createElement("path",{d:"M116 216a12 12 0 0 1-12 12H48a20 20 0 0 1-20-20V48a20 20 0 0 1 20-20h56a12 12 0 0 1 0 24H52v152h52a12 12 0 0 1 12 12Zm108.49-96.49-40-40a12 12 0 0 0-17 17L187 116h-83a12 12 0 0 0 0 24h83l-19.52 19.51a12 12 0 0 0 17 17l40-40a12 12 0 0 0 .01-17Z"})))};var O=n(3461),E=n(4514),M=n(1072);const k="lLj83MT8",Z="bDPtG7VD";var P=function(e){var s,n=e.className,a=(0,f.useState)(!1),r=a[0],i=a[1],d=(0,h.C)(m.is),u=(0,l.T)(),g=(0,o.s0)(),x=(0,M.$G)("pages").t;return(0,f.useEffect)((function(){var e=function(e){e.target.closest("#profileBtn")||i(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),(0,t.jsxs)("div",{className:c()("zXdybQLe",{},[n]),onClick:function(e){e.target.closest("#container")||i((function(e){return!e}))},id:"profileBtn",children:[(0,t.jsxs)("div",{className:"g_HDaOnQ",children:[(0,t.jsx)(v.q,{size:"S",avatarPath:d.avatarPath,className:"zYGuNlkk"}),(0,t.jsx)(j,{className:"AhJwW0xn"})]}),(0,t.jsxs)("div",{className:c()("vH4jcesl",(s={},s.zOUMz4rj=r,s),[]),id:"container",children:[(0,t.jsxs)(p.rU,{className:k,to:"/changeProfile",children:[(0,t.jsx)(O.Z,{className:Z}),x("Редактировать профиль")]}),(0,t.jsxs)("span",{className:k,onClick:function(){u((0,N.w7)({navigate:g}))},children:[(0,t.jsx)(y,{className:Z}),x("Выйти")]}),(0,t.jsxs)("div",{className:"KZfVicZM",children:[(0,t.jsx)(E.k,{short:!0}),(0,t.jsx)(w.Z,{})]})]})]})};var I=n(775),C=function(e){e.className,(0,l.T)(),(0,o.s0)();var s,n=(0,I.X)();return(0,t.jsxs)("div",{className:"KVbUQodg",children:[(0,t.jsx)("div",{className:c()("shonqUwZ",(s={},s.Rqh6NHRV=n,s),[]),children:(0,t.jsxs)(i.Z,{className:"ap0ogjxd",headerStyle:!0,children:[(0,t.jsx)(d.Dt,{}),(0,t.jsx)(P,{})]})}),(0,t.jsx)(u.P_,{})]})}},775:(e,s,n)=>{n.d(s,{X:()=>a});var a=function(){return document.documentElement.clientWidth<=900}},3416:(e,s,n)=>{n.d(s,{x0:()=>a});let a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,s)=>e+((s&=63)<36?s.toString(36):s<62?(s-26).toString(36).toUpperCase():s>62?"-":"_")),"")}}]);